(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"3zw3":function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,r){var o,l=null!=t?t:e.nullContext||{},i=e.hooks.helperMissing,c="function",u=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="poster" src="'+u(typeof(o=null!=(o=s(n,"imageURL")||(null!=t?s(t,"imageURL"):t))?o:i)===c?o.call(l,{name:"imageURL",hash:{},data:r,loc:{start:{line:1,column:25},end:{line:1,column:37}}}):o)+'" alt="'+u(typeof(o=null!=(o=s(n,"original_title")||(null!=t?s(t,"original_title"):t))?o:i)===c?o.call(l,{name:"original_title",hash:{},data:r,loc:{start:{line:1,column:44},end:{line:1,column:62}}}):o)+'">\r\n<section class="main_info">\r\n    <h2 class="title">'+u(typeof(o=null!=(o=s(n,"title")||(null!=t?s(t,"title"):t))?o:i)===c?o.call(l,{name:"title",hash:{},data:r,loc:{start:{line:3,column:22},end:{line:3,column:31}}}):o)+" "+u(typeof(o=null!=(o=s(n,"release_date")||(null!=t?s(t,"release_date"):t))?o:i)===c?o.call(l,{name:"release_date",hash:{},data:r,loc:{start:{line:3,column:32},end:{line:3,column:48}}}):o)+'</h2>\r\n    <table class="info">\r\n        <tr class="info-votes">\r\n            <td class="col1">vote/votes</td>\r\n            <td class="info-votes_value">'+u(typeof(o=null!=(o=s(n,"vote")||(null!=t?s(t,"vote"):t))?o:i)===c?o.call(l,{name:"vote",hash:{},data:r,loc:{start:{line:7,column:41},end:{line:7,column:49}}}):o)+"/"+u(typeof(o=null!=(o=s(n,"votes")||(null!=t?s(t,"votes"):t))?o:i)===c?o.call(l,{name:"votes",hash:{},data:r,loc:{start:{line:7,column:50},end:{line:7,column:59}}}):o)+'</td>\r\n        </tr>\r\n        <tr class="info-popularity">\r\n            <td class="col1">popularity</td>\r\n            <td class="info-popularity_value">'+u(typeof(o=null!=(o=s(n,"popularity")||(null!=t?s(t,"popularity"):t))?o:i)===c?o.call(l,{name:"popularity",hash:{},data:r,loc:{start:{line:11,column:46},end:{line:11,column:60}}}):o)+'</td>\r\n        </tr>\r\n        <tr class="info-name">\r\n            <td class="col1">original title</td>\r\n            <td class="info-name_value">'+u(typeof(o=null!=(o=s(n,"title")||(null!=t?s(t,"title"):t))?o:i)===c?o.call(l,{name:"title",hash:{},data:r,loc:{start:{line:15,column:40},end:{line:15,column:49}}}):o)+'</td>\r\n        </tr>\r\n        <tr class="info-genre">\r\n            <td class="col1" valign="top">genre</td>\r\n            <td class="info-genre_value">'+u(typeof(o=null!=(o=s(n,"genres")||(null!=t?s(t,"genres"):t))?o:i)===c?o.call(l,{name:"genres",hash:{},data:r,loc:{start:{line:19,column:41},end:{line:19,column:51}}}):o)+'</td>\r\n        </tr>\r\n    </table>\r\n    <h2 class="about">About</h2>\r\n    <p class="description">'+u(typeof(o=null!=(o=s(n,"overview")||(null!=t?s(t,"overview"):t))?o:i)===c?o.call(l,{name:"overview",hash:{},data:r,loc:{start:{line:23,column:27},end:{line:23,column:39}}}):o)+'</p>\r\n    <div class="watching_buttons">\r\n        <button class="button button_watched" data-id="'+u(typeof(o=null!=(o=s(n,"id")||(null!=t?s(t,"id"):t))?o:i)===c?o.call(l,{name:"id",hash:{},data:r,loc:{start:{line:25,column:55},end:{line:25,column:61}}}):o)+'">Watched</button>\r\n        <button class="button button_later" data-id="'+u(typeof(o=null!=(o=s(n,"id")||(null!=t?s(t,"id"):t))?o:i)===c?o.call(l,{name:"id",hash:{},data:r,loc:{start:{line:26,column:53},end:{line:26,column:59}}}):o)+'">Watch later</button>\r\n    </div>\r\n\r\n</section>'},useData:!0})},QfWi:function(e,t,n){"use strict";n.r(t);n("Anew"),n("uVvT"),n("8cZI"),n("lmye"),n("D/wG"),n("JBxO"),n("FdtR"),n("Muwe"),n("aZFp"),n("wcNg");function a(e,t,n,a,r,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(a,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var l=e.apply(t,n);function i(e){a(l,r,o,i,c,"next",e)}function c(e){a(l,r,o,i,c,"throw",e)}i(void 0)}))}}var o={API_KEY:"168af0fe4d819af69af0e65f181d8d99",page:1,searchText:"",updatePage:function(){this.page+=1},downgradePage:function(){this.page&&(this.page-=1)},resetPage:function(){this.page=1},getPopularMovies:function(){var e=this;return r(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.themoviedb.org/3/movie/popular?api_key="+e.API_KEY+"&language=en-US&page="+e.page+"&region=UA");case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a.results.map((function(e){return{imageURL:null===e.poster_path?"https://consaltliga.com.ua/wp-content/themes/consultix/images/no-image-found-360x250.png":"https://image.tmdb.org/t/p/w500"+e.poster_path,title:e.title,vote:e.vote_average,release_date:""!==e.release_date?"("+e.release_date.split("-")[0]+")":"",id:e.id}})));case 7:case"end":return t.stop()}}),t)})))()},getMovie:function(e){var t=this;return r(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://api.themoviedb.org/3/movie/"+e+"?api_key="+t.API_KEY+"&language=en-US");case 2:return a=n.sent,n.next=5,a.json();case 5:return r=n.sent,n.abrupt("return",{imageURL:null===r.poster_path?"https://consaltliga.com.ua/wp-content/themes/consultix/images/no-image-found-360x250.png":"https://image.tmdb.org/t/p/w500"+r.poster_path,genres:r.genres.map((function(e){return e.name.toLowerCase()})).join(", "),title:r.title,originalTitle:r.original_title,overview:r.overview,vote:r.vote_average,votes:r.vote_count,release_date:""!==r.release_date?"("+r.release_date.split("-")[0]+")":"",popularity:r.popularity,id:r.id});case 7:case"end":return n.stop()}}),n)})))()},getWatchedMovie:function(e){var t=this;return r(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://api.themoviedb.org/3/movie/"+e+"?api_key="+t.API_KEY+"&language=en-US");case 2:return a=n.sent,n.next=5,a.json();case 5:return r=n.sent,n.abrupt("return",{imageURL:null===r.poster_path?"https://consaltliga.com.ua/wp-content/themes/consultix/images/no-image-found-360x250.png":"https://image.tmdb.org/t/p/w500"+r.poster_path,title:r.title,vote:r.vote_average});case 7:case"end":return n.stop()}}),n)})))()},getSearchedMovie:function(e){var t=this;return r(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",t.getPopularMovies());case 2:return n.next=4,fetch("https://api.themoviedb.org/3/search/movie?api_key="+t.API_KEY+"&language=en-US&query="+e.split(" ").join("+")+"&page="+t.page+"&region=UA");case 4:return a=n.sent,n.next=7,a.json();case 7:return r=n.sent,n.abrupt("return",r.results.map((function(e){return{imageURL:null===e.poster_path?"https://consaltliga.com.ua/wp-content/themes/consultix/images/no-image-found-360x250.png":"https://image.tmdb.org/t/p/w500"+e.poster_path,original_title:e.original_title,title:e.title,release_date:""!==e.release_date?"("+e.release_date.split("-")[0]+")":"",vote:e.vote_average,id:e.id}})));case 9:case"end":return n.stop()}}),n)})))()}},l=(n("QDHd"),{main:document.querySelector('a[href="main"]'),searchForm:document.querySelector("#search-form"),searchInput:document.querySelector("#search-form_input"),mainContent:document.querySelector(".main_content"),pagination:document.querySelector(".pagination"),paginationBtnPrev:document.querySelector("#pagination_btn-prev"),paginationBtnNext:document.querySelector("#pagination_btn-next"),paginationValue:document.querySelector("#pagination_value"),homeRef:document.querySelector('a[href="home"]'),libraryRef:document.querySelector('a[href="my-library"]'),watched:document.querySelector(".button_watched"),watchLater:document.querySelector(".button_later")}),i=n("Y622"),c=n.n(i);function u(e,t){var n=t(e);l.mainContent.insertAdjacentHTML("beforeend",n)}function s(e){e.innerHTML=""}function d(e){e.classList.add("hidden")}function p(e){e.classList.remove("hidden")}function m(e){o.getSearchedMovie(e).then((function(e){s(l.mainContent),l.paginationValue.innerHTML=o.page,u(e,c.a)}))}var h=n("3zw3"),g=n.n(h),f=(n("hi3g"),n("lYjL"),n("IvQZ"),n("lAJ5"),n("4NM0"),{});function v(e,t,n){e.addEventListener("click",(function(e){e.currentTarget===e.target&&(function(e,t){var n=JSON.parse(localStorage.getItem(t)),a=e.target.dataset.id,r={id:a,data:f};try{n.some((function(e){return e.id===a}))||localStorage.setItem(t,JSON.stringify(n.concat(r)))}catch(e){localStorage.setItem(t,JSON.stringify([r]))}}(e,t),n&&function(e,t){var n=JSON.parse(localStorage.getItem(e)).map((function(e){return e.id}));if(!JSON.parse(localStorage.getItem(t)))return;var a=JSON.parse(localStorage.getItem(t)).filter((function(e){return!n.includes(e.id)}));localStorage.setItem(t,JSON.stringify(a))}(t,n))}))}function _(){l.mainContent.addEventListener("click",(function(e){e.stopPropagation();var t=e.target.parentElement.dataset.id;t&&o.getMovie(t).then((function(e){return s(l.mainContent),d(l.searchForm),d(l.pagination),u(e,g.a),console.log(e.release_date),e})).then((function(e){!function(e){f.imageURL=e.imageURL,f.title=e.title,f.id=e.id,f.vote=e.vote,f.release_date=e.release_date}(e);var t=document.querySelector(".button_later");v(document.querySelector(".button_watched"),"watchedIds","watchLaterIds"),v(t,"watchLaterIds","watchedIds")}))}))}o.getSearchedMovie(void 0).then((function(e){s(l.mainContent),l.paginationValue.innerHTML=o.page,u(e,c.a)})).finally(_()),l.main.addEventListener("click",(function(e){e.preventDefault(),l.searchInput.value="",o.searchText="",m(""),p(l.searchForm),p(l.pagination)}));n("iPZ8"),n("kypl"),n("pCzD"),n("/YXa"),n("WoWj"),n("U00V");var y=n("k/CE"),w=n.n(y);function b(e){"watchedIds"===e?(l.watchLater.classList.remove("button--is_active"),l.watched.classList.add("button--is_active")):(l.watched.classList.remove("button--is_active"),l.watchLater.classList.add("button--is_active"));var t=document.querySelector(".cards");t&&t.remove(),x(e)}function x(e){var t=[],n=JSON.parse(localStorage.getItem(e)),a=Array.isArray(n),r=0;for(n=a?n:n[Symbol.iterator]();;){var o;if(a){if(r>=n.length)break;o=n[r++]}else{if((r=n.next()).done)break;o=r.value}var l=o;t.push(l.data)}u(t,c.a)}l.libraryRef.addEventListener("click",(function(e){e.preventDefault(),s(l.mainContent),d(l.searchForm),d(l.pagination),u("",w.a),x("watchedIds"),l.watched=document.querySelector(".button_watched"),l.watchLater=document.querySelector(".button_later"),l.watched.addEventListener("click",(function(e){e.preventDefault(),b("watchedIds")})),l.watchLater.addEventListener("click",(function(e){e.preventDefault(),b("watchLaterIds")}))})),l.searchInput.addEventListener("keypress",(function(e){o.searchText=l.searchInput.value,13===e.keyCode&&(e.preventDefault(),o.resetPage(),p(l.pagination),m(o.searchText))})),l.paginationBtnNext.addEventListener("click",(function(){o.updatePage(),m(o.searchText)})),l.paginationBtnPrev.addEventListener("click",(function(){1!==o.page&&(o.downgradePage(),m(o.searchText))})),l.homeRef.addEventListener("click",(function(e){e.preventDefault(),e.preventDefault(),m(o.searchText),p(l.searchForm),p(l.pagination)}))},Y622:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,r){var o,l=null!=t?t:e.nullContext||{},i=e.hooks.helperMissing,c="function",u=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <li class="cards-item" data-id="'+u(typeof(o=null!=(o=s(n,"id")||(null!=t?s(t,"id"):t))?o:i)===c?o.call(l,{name:"id",hash:{},data:r,loc:{start:{line:3,column:36},end:{line:3,column:42}}}):o)+'">\r\n        <img src="'+u(typeof(o=null!=(o=s(n,"imageURL")||(null!=t?s(t,"imageURL"):t))?o:i)===c?o.call(l,{name:"imageURL",hash:{},data:r,loc:{start:{line:4,column:18},end:{line:4,column:30}}}):o)+'" alt="'+u(typeof(o=null!=(o=s(n,"original_title")||(null!=t?s(t,"original_title"):t))?o:i)===c?o.call(l,{name:"original_title",hash:{},data:r,loc:{start:{line:4,column:37},end:{line:4,column:55}}}):o)+'">\r\n        <p class="film_name">'+u(typeof(o=null!=(o=s(n,"title")||(null!=t?s(t,"title"):t))?o:i)===c?o.call(l,{name:"title",hash:{},data:r,loc:{start:{line:5,column:29},end:{line:5,column:38}}}):o)+" "+u(typeof(o=null!=(o=s(n,"release_date")||(null!=t?s(t,"release_date"):t))?o:i)===c?o.call(l,{name:"release_date",hash:{},data:r,loc:{start:{line:5,column:39},end:{line:5,column:55}}}):o)+'</p>\r\n        <p class="film_rate js_film_rate">'+u(typeof(o=null!=(o=s(n,"vote")||(null!=t?s(t,"vote"):t))?o:i)===c?o.call(l,{name:"vote",hash:{},data:r,loc:{start:{line:6,column:42},end:{line:6,column:50}}}):o)+"</p>\r\n    </li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,r){var o;return'<ul class="cards container">\r\n'+(null!=(o=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:2,column:4},end:{line:8,column:13}}}))?o:"")+"</ul>"},useData:!0})},"k/CE":function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,a,r){return'<div class="library-page_buttons container">\r\n    <button class="button_watched button--is_active">\r\n        Watched\r\n    </button>\r\n\r\n    <button class="button_later">\r\n        Watch later\r\n    </button>\r\n\r\n</div>'},useData:!0})},uVvT:function(e,t,n){}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.92b30b36c0f3b0a5d30c.js.map